*** Begin Patch
*** Update File: circl-backend/users/views.py
@@
-def send_push_notification(token, title, body):
-    payload = {
-        "aps": {
-            "alert": {
-                "title": title,
-                "body": body
-            },
-            "sound": "default"
-        }
-    }
-
-    payload_str = json.dumps(payload)
-
-    curl_cmd = [
-        "curl", "-v", "--http2",
-        "--cert", "/home/vullibhavin33_gmail_com/apns/apns-cert.pem",
-        "-H", "apns-topic: com.fragne.circl",
-        "-H", "Content-Type: application/json",
-        "-d", payload_str,
-        f"https://api.push.apple.com/3/device/{token}"
-    ]
-
-    result = subprocess.run(curl_cmd, capture_output=True, text=True)
-    print(f"ðŸ“¤ Push to {token}: {title} â€“ {body}")
-    print("ðŸ“¤ CURL RETURN CODE:", result.returncode)
-    print("ðŸ“¤ STDOUT:", result.stdout)
-    print("ðŸ“¤ STDERR:", result.stderr)
+from notifications.sender import send_apns_push
+
+
+def send_push_notification(token, title, body, custom: dict = None, use_prod: bool = True):
+    aps = {
+        "aps": {
+            "alert": {
+                "title": title,
+                "body": body
+            },
+            "sound": "default"
+        }
+    }
+
+    result = send_apns_push(token, aps, custom=custom, use_prod=use_prod)
+
+    print(f"ðŸ“¤ Push to {token}: {title} â€“ {body}")
+    print("ðŸ“¤ RESULT:", result)
*** End Patch